<!DOCTYPE html>

<html lang="en">
  <head>
    <meta charset="utf-8" />
    <title>Proposed Algorithm</title>
    <link
      rel="stylesheet"
      href="https://unpkg.com/leaflet@1.3.1/dist/leaflet.css"
    />
    <link href="js/sb-admin.css" rel="stylesheet" />
    <style>
      body {
        font-family: sans-serif;
        margin: 0;
        padding: 0;
      }

      .map {
        /* position: absolute; */
        width: 100%;
        height: 250px;
        /* top: 0; */
        /* bottom: 0; */
      }
    </style>
    <script src="js/jquery-3.2.1.min.js"></script>
    <script src="js/leaflet.js"></script>
    <script src="js/turf.min.js"></script>
    <script src="../qgis/polygon.geojson" type="text/javascript"></script>
    <script src="utils.js"></script>
  </head>

  <body>
    <div class="container">
      <div class="row">
        <div class="col habib">Habib Algorithm</div>
        <div class="col proposed">
          Proposed Algorithm
          <div id="proposed11map"></div>
        </div>
        <div class="col hybrid">
          Hybrid Algorithm
          <div id="hybrid11map"></div>
        </div>
      </div>
    </div>
  </body>
  <script>
    var $habib = $(".habib");
    var $proposed = $(".proposed");
    var $hybrid = $(".hybrid");
  </script>
  <script>
    var $habib11 = $("<div></div>").addClass("map").attr({
      id: "habib11map",
    });
    $habib.append($habib11);
    var habib11map = L.map("habib11map", {
      center: [35, 0],
      zoom: 2,
      crs: L.CRS.Simple,
    });
    let polygon = L.geoJSON(polygonLayer).addTo(habib11map);
    habib11map.fitBounds(polygon.getBounds());
    habib11map.invalidateSize();
    const labelLayer = L.featureGroup().addTo(habib11map);
    // add labels to each vertex of the polygon
    polygon
      .getLayers()[0]
      .getLatLngs()[0]
      .forEach((latLng, index) => {
        const label = L.tooltip({
          direction: "auto",
        })
          .setLatLng(latLng)
          .setContent(`<span>${index}</span>`)
          .setContent(`<span>${numberToCapitalLetter(index + 1)}</span>`)
          .addTo(labelLayer);
        // Apply styling to label if needed
      });
    let points = polygonLayer.features[0].geometry.coordinates[0];

    const selectedPoint = points[0];
    const requiredArea = 120;
    // Habib One Point and Area Algorithm
    for (let i = 2; i < points.length; i++) {
      if (calcPolygonAreaShoelace(points.slice(0, i)) >= requiredArea) {
        const LVertex = points[i - 2];
        const NVertex = points[i - 1];
        const areaDiff =
          requiredArea - calcPolygonAreaShoelace(points.slice(0, i - 1));
        const pDist = (2 * areaDiff) / distance(LVertex, points[0]);
        const pNewLatLng = [
          LVertex[0] +
            ((NVertex[0] - LVertex[0]) * pDist) / distance(NVertex, LVertex),
          LVertex[1] +
            ((NVertex[1] - LVertex[1]) * pDist) / distance(NVertex, LVertex),
        ];
        var newPolygon = points.slice(0, i - 1);
        newPolygon.push(pNewLatLng);
        L.polygon(L.GeoJSON.coordsToLatLngs(newPolygon), {
          color: "red",
        }).addTo(habib11map);
        break;
      }
      //
    }
  </script>
</html>
